{
	"dockerFile": "Dockerfile",
	"features": {
		"ghcr.io/devcontainers/features/git":               {},
		"ghcr.io/dojofive/embedops-features/eo:latest":     {},
		"ghcr.io/eitsupi/devcontainer-features/jq-likes:2": {},
		"ghcr.io/devcontainers/features/common-utils:2": {
			"upgradePackages":      "false",
			"installZsh":           "false",
			"installOhMyZsh":       "false",
			"installOhMyZshConfig": "false",
			"username":             "${localEnv:USER}",
			"userUid":              "automatic",
			"userGid":              "automatic",
		},
		"ghcr.io/dojofive/embedops-features/zephyr-dev:latest":            {},
		"ghcr.io/dojofive/embedops-features/ceedling:latest": {"code-coverage": true},
		"ghcr.io/dojofive/embedops-features/gcc:latest":      {},
	},
	"remoteUser": "${localEnv:USER}",
	"mounts": [
		{
			"type":   "bind",
			"source": "${localEnv:HOME}${localEnv:USERPROFILE}/.embedops",
			"target": "/home/${localEnv:USER}/.embedops",
		},
	],
	"initializeCommand": "mkdir -p ~/.embedops",
	"customizations": {
		"vscode": {
			"settings": {
				// STM32
				"remote.extensionKind": {
					"stmicroelectronics.stm32-vscode-extension": [
						"workspace",
					],
				},
			},
			"extensions": [
				// STM32
				// "ms-vscode.cpptools",
				// "ms-vscode.cpptools-extension-pack",
				// "ms-vscode.cpptools-themes",
				// "stmicroelectronics.stm32-vscode-extension",
				// "bmd.stm32-for-vscode",
				// Nordic
				// "nordic-semiconductor.nrf-connect-extension-pack",
				// Common
				// "mcu-debug.debug-tracker-vscode",
				// "marus25.cortex-debug",
				"ms-vscode.vscode-serial-monitor",
			],
		},
	},
	"postStartCommand": "/bin/bash -c 'source /etc/profile.d/gcovr.sh || echo \"Warning: Unable to source gcovr.sh\"'",

	"image": "ubuntu:24.04",
}